const Sequelize = require('sequelize');
const database = require('cd ../config/db.js');

const Pessoas = database.define('Pessoas', {

  idPessoas: {
    type: DataTypes.INTEGER,
    autoIncrement: true,
    primaryKey: true
  },

  nomeSobrenome: {
    type: DataTypes.STRING(100),
    allowNull: false
  },

  Telefone: {
    type: DataTypes.STRING(15),
    allowNull: false
  },

  Senha: {
    type: DataTypes.STRING(10),
    allowNull: false
  },

  Status: {
    type: DataTypes.ENUM('ativo', 'inativo'),
    allowNull: false,
    defaultValue: 'ativo'
  },

  datacadastro: {
    type: DataTypes.DATE,
    defaultValue: DataTypes.NOW
  },

  dataAlteracao: {
    type: DataTypes.DATE,
    defaultValue: DataTypes.NOW
  },

  idEndereco: {
    type: DataTypes.INTEGER,
    references: {
      model: 'Endereco', // nome da tabela referenciada
      key: 'idEndereco'
    },
    onUpdate: 'CASCADE',
    onDelete: 'SET NULL'
  }

}, {
  tableName: 'Pessoas',
  timestamps: false // já tem campos de data no banco, então desativa os automáticos
});

module.exports = Pessoas;
